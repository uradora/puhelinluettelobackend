(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(3),c=n(1),i=n(14),o=n.n(i),u=n(0),a=function(e){var t=e.person,n=e.deletePerson;return Object(u.jsxs)("div",{children:[t.name," ",t.number," ",Object(u.jsx)("button",{onClick:function(){return n({person:t})},children:"delete"})]})},s=function(e){var t=e.filtre,n=e.setShowAll,r=e.setFiltre;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{value:t,onChange:function(e){n(!1),r(e.target.value)}})]})},l=function(e){var t=e.addPerson,n=e.newName,r=e.newNumber,c=e.handleNameChange,i=e.handleNumberChange;return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:t,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:c})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:r,onChange:i})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})})},d=n(4),j=n.n(d),b="/api/persons",h=function(){return j.a.get(b).then((function(e){return e.data}))},f=function(e){return j.a.post(b,e).then((function(e){return e.data}))},m=function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},O=function(e,t){return j.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},x=(n(38),function(e){var t=e.message;return null===t.text?null:!0===t.isError?Object(u.jsx)("div",{className:"error",children:t.text}):Object(u.jsx)("div",{className:"success",children:t.text})}),v=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1],o=Object(c.useState)(""),d=Object(r.a)(o,2),j=d[0],b=d[1],v=Object(c.useState)(""),p=Object(r.a)(v,2),w=p[0],g=p[1],E=Object(c.useState)(!0),N=Object(r.a)(E,2),C=N[0],S=N[1],k=Object(c.useState)(""),P=Object(r.a)(k,2),y=P[0],T=P[1],A=Object(c.useState)({text:null,isError:!1}),D=Object(r.a)(A,2),F=D[0],I=D[1];Object(c.useEffect)((function(){h().then((function(e){i(e)}))}),[]);var J=C?n:n.filter((function(e){return!0===e.name.toLowerCase().includes(y.toLowerCase())})),L=function(e){var t=e.person;window.confirm("Delete ".concat(t.name," ?"))&&(m(t.id).then(i(n.filter((function(e){return e.id!==t.id})))),I({text:"Deleted ".concat(t.name),isError:!1}),setTimeout((function(){I({text:null,isError:!1})}),5e3))};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(x,{message:F}),Object(u.jsx)("div",{children:Object(u.jsx)(s,{filtre:y,setShowAll:S,setFiltre:T})}),Object(u.jsx)("div",{children:Object(u.jsx)(l,{addPerson:function(e){if(e.preventDefault(),n.map((function(e){return e.name})).includes(j)){if(window.confirm("".concat(j," is already added to phonebook, replace the old number with a new one?"))){var t=n.find((function(e){return e.name===j})),r=t.id;t&&O(r,{name:j,number:w}).then((function(e){i(n.map((function(t){return t.id!==r?t:e}))),I({text:"".concat(e.name," number updated"),isError:!1}),setTimeout((function(){I({text:null,isError:!1})}),5e3)})).catch((function(e){I({text:"Information of ".concat(j," has already been removed from the server"),isError:!0}),setTimeout((function(){I({text:null,isError:!0})}),5e3)}))}}else f({name:j,number:w}).then((function(e){i(n.concat(e)),I({text:"Added ".concat(e.name),isError:!1}),setTimeout((function(){I({text:null,isError:!1})}),5e3),b(""),g("")}))},newName:j,newNumber:w,handleNameChange:function(e){b(e.target.value)},handleNumberChange:function(e){g(e.target.value)}})}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)("ul",{children:J.map((function(e){return Object(u.jsx)(a,{person:e,deletePerson:L},e.name)}))})]})};o.a.render(Object(u.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.4b89f2c3.chunk.js.map